{% extends 'base.html.twig' %}

{% block title %}My Orders
{% endblock %}

{% block body %}
	<h1>ğŸ“¦ My Orders</h1>

	{% set current = status ?? 'all' %}

	<!-- Filter Bar -->
	<div class="filter-bar">
		<span class="text-muted" style="font-weight: 500;">Status:</span>

		<a href="{{ path('account_orders_index') }}" class="{{ current == 'all' ? 'active' : '' }}">
			All
		</a>

		<a href="{{ path('account_orders_index', {status: 'paid'}) }}" class="{{ current == 'paid' ? 'active' : '' }}">
			âœ… Paid
		</a>

		<a href="{{ path('account_orders_index', {status: 'pending'}) }}" class="{{ current == 'pending' ? 'active' : '' }}">
			â³ Pending
		</a>
	</div>

	{% if orders is empty %}
		<div class="empty-state">
			<div class="empty-state-icon">ğŸ“¦</div>
			<h2>No orders yet</h2>
			<p class="text-muted mb-2">Start shopping to see your orders here!</p>
			<a href="{{ path('catalog_index') }}" class="btn btn-primary">
				Browse Products
			</a>
		</div>
	{% else %}
		<div class="card">
			<table class="table">
				<thead>
					<tr>
						<th>Order</th>
						<th>Status</th>
						<th>Total</th>
						<th>Created</th>
						<th>Paid</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					{% for order in orders %}
						<tr>
							<td>
								<strong style="color: var(--color-primary);">#{{ order.id }}</strong>
							</td>
							<td>
								{% include 'account/orders/_status_badge.html.twig' with { status: order.status } %}
							</td>
							<td>
								<strong style="color: var(--color-accent);">
									{{ (order.totalAmount / 100)|number_format(2, '.', '') }}
									{{ order.currency }}
								</strong>
							</td>
							<td class="text-muted">
								{{ order.createdAt|date('Y-m-d H:i') }}
							</td>
							<td>
								{% if order.paidAt %}
									<span style="color: var(--color-success);">
										{{ order.paidAt|date('Y-m-d H:i') }}
									</span>
								{% else %}
									<span class="text-muted">â€”</span>
								{% endif %}
							</td>
							<td>
								<a href="{{ path('account_orders_show', {id: order.id}) }}" class="btn btn-secondary btn-sm">
									View Details
								</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	{% endif %}
{% endblock %}
