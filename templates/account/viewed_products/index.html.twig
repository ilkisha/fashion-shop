{% extends 'base.html.twig' %}
{% block title %}Viewed Products
{% endblock %}

{% block body %}
	<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
		<h1 style="margin: 0;">ğŸ‘ï¸ Viewed Products</h1>
		{% if products is not empty %}
			<form method="post" action="{{ path('account_viewed_products_clear') }}" style="margin: 0;">
				<button type="submit" class="btn btn-secondary">
					ğŸ—‘ï¸ Clear History
				</button>
			</form>
		{% endif %}
	</div>

	{% if products is empty %}
		<div class="empty-state">
			<div class="empty-state-icon">ğŸ‘ï¸</div>
			<h2>No viewed products yet</h2>
			<p class="text-muted mb-2">Start browsing products to build your viewing history.</p>
			<a href="{{ path('catalog_index') }}" class="btn btn-primary">
				Browse Products
			</a>
		</div>
	{% else %}
		<div class="product-grid">
			{% for product in products %}
				<div class="card product-card">
					<div style="position: relative;">
						<a href="{{ path('catalog_show', {slug: product.slug}) }}">
							{% if product.imagePath %}
								<img src="{{ asset('uploads/products/' ~ product.imagePath) }}" alt="{{ product.name }}" style="width: 100%; height: 280px; object-fit: cover;">
							{% else %}
								<div style="width: 100%; height: 280px; display:flex; align-items:center; justify-content:center; background: var(--color-bg); font-size: 3rem;">
									ğŸ‘—
								</div>
							{% endif %}
						</a>
						{% if product.stockQuantity == 0 %}
							<span class="out-of-stock-badge">Out of Stock</span>
						{% endif %}
					</div>

					<div class="card-body">
						<h3 style="font-size: 1.1rem; margin-bottom: 0.25rem;">
							<a href="{{ path('catalog_show', {slug: product.slug}) }}" style="color: var(--color-text); text-decoration: none;">
								{{ product.name }}
							</a>
						</h3>
						<div class="text-muted" style="font-size: 0.85rem; margin-bottom: 0.5rem;">
							{{ product.category }}
							â€¢
							{{ product.gender }}
						</div>
						<div style="font-size: 1.25rem; font-weight: 600; color: var(--color-primary);">
							{{ product.price }}
							EUR
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	{% endif %}
{% endblock %}
